### 개요

Google Maps에서 오버레이(Overlay) 기능을 활용하여 마커와 정보창을 표시하는 방법을 다룹니다. 이 문서에서는 커스텀 마커와 정보창을 구현하여 사용자 인터랙션을 제공하는 방법을 설명합니다.

#### 주요 기능

- **커스텀 마커**: SVG를 활용한 개성있는 마커 디자인
- **정보창 표시**: 마커 클릭 시 상세 정보를 보여주는 InfoWindow
- **상호작용**: 마커 클릭, 정보창 닫기 등 사용자 이벤트 처리
- **반응형 디자인**: 다양한 화면 크기에 대응하는 레이아웃

### 주요 코드

#### 마커 정보창 컴포넌트

`CustomInfoWindow` 컴포넌트는 Google Maps의 InfoWindow를 활용하여 마커 클릭 시 상세 정보를 표시합니다.

**주요 특징:**

- 선택된 마커의 정보를 동적으로 표시
- 마커별 색상과 아이콘을 반영한 디자인
- 위치 정보(위도/경도) 표시
- 닫기 버튼을 통한 사용자 제어

**핵심 기능:**

- `selectedMarker`: 현재 선택된 마커 데이터
- `onClose`: 정보창 닫기 이벤트 핸들러
- `pixelOffset`: 정보창 위치 조정 (마커 위에 표시)

#### 커스텀 마커 컴포넌트

`CustomMarker` 컴포넌트는 SVG를 활용하여 개성있는 마커를 생성합니다.

**주요 특징:**

- SVG 기반 커스텀 아이콘 생성
- 마커별 색상과 이모지 아이콘 지원
- 클릭 이벤트 처리
- 반응형 크기 조정

### 전체 코드

#### src/pages/overlay/OverlayBasicPage.jsx

```jsx
// src/pages/overlay/OverlayBasicPage.jsx
import { GoogleMap } from "@react-google-maps/api";
import { useState } from "react";
import CustomMarker from "@/components/overlay/CustomMarker";
import CustomInfoWindow from "@/components/overlay/CustomInfoWindow";
import "@/pages/map/MapPage.css";

const center = {
  lat: 37.5665, // 서울의 위도
  lng: 126.978, // 서울의 경도
};

// 커스텀 마커 데이터
const customMarkers = [
  {
    id: 1,
    position: { lat: 37.5665, lng: 126.978 },
    title: "서울 중심지",
    description: "대한민국의 수도 서울의 중심부입니다.",
    icon: "🏢",
    color: "#667eea",
  },
  {
    id: 2,
    position: { lat: 37.5759, lng: 126.9769 },
    title: "경복궁",
    description: "조선 왕조의 법궁으로 사용된 궁궐입니다.",
    icon: "🏯",
    color: "#f093fb",
  },
];

/**
 * 오버레이 기본 테스트 페이지입니다.
 *  - 마커를 클릭시 정보 창이 표시됩니다.
 */
const OverlayBasicPage = () => {
  const [selectedMarker, setSelectedMarker] = useState(null);
  const [mapCenter, setMapCenter] = useState(center);

  const handleMarkerClick = (marker) => {
    setSelectedMarker(marker);
    setMapCenter(marker.position);
  };

  const handleInfoWindowClose = () => {
    setSelectedMarker(null);
  };

  return (
    <div className="map-page">
      <div className="map-container">
        <GoogleMap
          mapContainerClassName="map-inner"
          center={mapCenter}
          zoom={13}
          options={{
            styles: [
              {
                featureType: "poi",
                elementType: "labels",
                stylers: [{ visibility: "off" }],
              },
            ],
          }}
        >
          {/* 커스텀 마커 */}
          {customMarkers.map((marker) => (
            <CustomMarker
              key={marker.id}
              marker={marker}
              onMarkerClick={handleMarkerClick}
            />
          ))}

          {/* 선택된 마커의 정보 창 */}
          <CustomInfoWindow
            selectedMarker={selectedMarker}
            onClose={handleInfoWindowClose}
          />
        </GoogleMap>
      </div>
    </div>
  );
};

export default OverlayBasicPage;
```

#### src/components/overlay/CustomInfoWindow.jsx

```jsx
// src/components/overlay/CustomInfoWindow.jsx
import { InfoWindow } from "@react-google-maps/api";

/**
 * 커스텀 정보창 컴포넌트
 * @param {Object} selectedMarker - 선택된 마커 데이터
 * @param {Function} onClose - 정보창 닫기 핸들러
 */
const CustomInfoWindow = ({ selectedMarker, onClose }) => {
  if (!selectedMarker) return null;

  return (
    <InfoWindow
      position={selectedMarker.position}
      onCloseClick={onClose}
      options={{
        // 정보창 위치 조정
        pixelOffset: new window.google.maps.Size(0, -50),
      }}
    >
      <div
        style={{
          padding: "10px",
          maxWidth: "200px",
        }}
      >
        <h4
          style={{
            margin: "0 0 8px 0",
            color: selectedMarker.color,
            fontSize: "16px",
            fontWeight: "600",
          }}
        >
          {selectedMarker.icon} {selectedMarker.title}
        </h4>
        <p
          style={{
            margin: "0",
            fontSize: "14px",
            lineHeight: "1.4",
            color: "#666",
          }}
        >
          {selectedMarker.description}
        </p>
        <div
          style={{
            marginTop: "8px",
            fontSize: "12px",
            color: "#999",
          }}
        >
          위도: {selectedMarker.position.lat.toFixed(4)}
          <br />
          경도: {selectedMarker.position.lng.toFixed(4)}
        </div>
      </div>
    </InfoWindow>
  );
};

export default CustomInfoWindow;
```

### 사용법

#### 1. 기본 설정

```jsx
// 마커 데이터 구조
const markerData = {
  id: 1,
  position: { lat: 37.5665, lng: 126.978 },
  title: "마커 제목",
  description: "마커 설명",
  icon: "🏢", // 이모지 아이콘
  color: "#667eea", // 마커 색상
};
```

#### 2. 상태 관리

```jsx
const [selectedMarker, setSelectedMarker] = useState(null);

// 마커 클릭 핸들러
const handleMarkerClick = (marker) => {
  setSelectedMarker(marker);
  setMapCenter(marker.position);
};

// 정보창 닫기 핸들러
const handleInfoWindowClose = () => {
  setSelectedMarker(null);
};
```

#### 3. 컴포넌트 사용

```jsx
<GoogleMap>
  {/* 마커들 */}
  {markers.map((marker) => (
    <CustomMarker
      key={marker.id}
      marker={marker}
      onMarkerClick={handleMarkerClick}
    />
  ))}

  {/* 정보창 */}
  <CustomInfoWindow
    selectedMarker={selectedMarker}
    onClose={handleInfoWindowClose}
  />
</GoogleMap>
```

### 주의사항

1. **성능 최적화**: 많은 마커가 있는 경우 클러스터링을 고려하세요.
2. **메모리 관리**: 컴포넌트 언마운트 시 이벤트 리스너를 정리하세요.
3. **반응형 디자인**: 모바일 환경에서의 터치 이벤트를 고려하세요.
4. **접근성**: 키보드 네비게이션과 스크린 리더 지원을 추가하세요.

### 확장 가능한 기능

- **마커 클러스터링**: 많은 마커를 그룹화하여 성능 향상
- **애니메이션**: 마커 클릭 시 부드러운 전환 효과
- **커스텀 스타일**: CSS를 활용한 정보창 디자인 커스터마이징
- **데이터 바인딩**: API 연동을 통한 동적 마커 데이터 로딩
